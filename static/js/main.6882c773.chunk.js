(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{104:function(t,e,a){t.exports=a(140)},109:function(t,e,a){},130:function(t,e,a){},131:function(t,e,a){},132:function(t,e,a){},133:function(t,e,a){},134:function(t,e,a){},135:function(t,e,a){},140:function(t,e,a){"use strict";a.r(e);var n,r,i=a(0),o=a.n(i),c=a(9),l=a.n(c),u=(a(109),a(12)),s=a(43),d=a(29),m=a(54),f=a(7),E=a(84),b=a.n(E).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"95a44df4-1e44-4034-980e-00368d0e9811"}}),O=function(){return b.get("todo-lists")},T=function(t){return b.post("todo-lists",{title:t})},p=function(t){return b.delete("todo-lists/".concat(t))},g=function(t,e){return b.put("todo-lists/".concat(t),{title:e})},h=function(t){return b.get("todo-lists/".concat(t,"/tasks"))},L=function(t,e){return b.post("todo-lists/".concat(t,"/tasks"),{title:e})},j=function(t,e){return b.delete("todo-lists/".concat(t,"/tasks/").concat(e))},v=function(t,e,a){return b.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},S=function(t){return b.post("auth/login",t)},I=function(){return b.delete("auth/login")},k=function(){return b.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var C=function(t,e){t.messages.length?e(P(t.messages[0])):e(P("Some error occurred")),e(w("failed"))},y=function(t,e){e(P(t.message?t.message:"Some error occurred :(")),e(w("failed"))},A={isSignIn:!1},D=function(t){return{type:"login/IS-SIGN-IN",isSignIn:t}},N={status:"idle",error:null,initialized:!1},P=function(t){return{type:"APP/SET-ERROR-MESSAGE",errorMessage:t}},w=function(t){return{type:"APP/SET-STATUS",status:t}},x={},F=function(t,e,a){return function(n,r){var i=r().tasks[t].find((function(t){return t.id===e}));if(i){var o=Object(f.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,status:i.status,title:i.title},a);n(w("loading")),v(t,e,o).then((function(r){0===r.data.resultCode?(n(function(t,e,a){return{type:"UPDATE-TASK",todoListId:t,taskId:e,model:a}}(t,e,a)),n(w("succeeded"))):C(r.data,n)})).catch((function(t){return y(t,n)}))}else console.warn("Task not found in the state!")}},K=[],R=a(85),M=Object(s.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.task.todoListId,[e.task].concat(Object(m.a)(t[e.task.todoListId]))));case"DELETE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.todoListId,Object(m.a)(t[e.todoListId].filter((function(t){return t.id!==e.taskId})))));case"CHANGE-TASK-TITLE":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},t),{},{title:e.title.trim()}):t}))));case"UPDATE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.todoList.id,[]));case"REMOVE-TODOLIST":var a=Object(f.a)({},t);return delete a[e.id],a;case"SET-TODOLIST":var n=Object(f.a)({},t);return e.todoLists.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({},e.todoListId,e.tasks));default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOLIST":return e.todoLists.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"ADD-TODOLIST":return[Object(f.a)(Object(f.a)({},e.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(m.a)(t));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(f.a)(Object(f.a)({},t),{},{title:e.title.trim()}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(f.a)(Object(f.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOS-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.status}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-ERROR-MESSAGE":return Object(f.a)(Object(f.a)({},t),{},{error:e.errorMessage});case"APP/SET-STATUS":return Object(f.a)(Object(f.a)({},t),{},{status:e.status});case"APP/SET-INITIALIZED-VALUE":return Object(f.a)(Object(f.a)({},t),{},{initialized:e.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/IS-SIGN-IN":return Object(f.a)(Object(f.a)({},t),{},{isSignIn:e.isSignIn});default:return t}}}),G=Object(s.d)(M,Object(s.a)(R.a)),U=(a(130),a(186)),H=a(187),V=a(184),q=(a(131),a(172)),B=a(176),z=a(177),Y=a(179),J=a(178);function W(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.auth.isSignIn})),a=o.a.useCallback((function(){t((function(t){t(w("loading")),I().then((function(e){0===e.data.resultCode?(t(D(!1)),t(w("succeeded"))):C(e.data,t)})).catch((function(e){return y(e,t)}))}))}),[e]);return o.a.createElement("header",null,o.a.createElement(q.a,{position:"static"},o.a.createElement(B.a,null,o.a.createElement(z.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(J.a,null)),o.a.createElement("div",{className:"btn-box"},e&&o.a.createElement(Y.a,{onClick:a,color:"inherit"},"Logout")))))}var Z=a(180),_=a(193),Q=a(181),X=Object(Z.a)((function(){return Object(_.a)({root:{width:"100%",height:"4px",position:"absolute",top:"64px"}})})),$=function(){var t=X();return o.a.createElement("div",{className:t.root},o.a.createElement(Q.a,{color:"secondary"}))},tt=a(192),et=a(189);function at(t){return o.a.createElement(et.a,Object.assign({elevation:6,variant:"filled"},t))}function nt(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.app.error})),a=null!==e,n=function(e,a){"clickaway"!==a&&t(P(null))};return o.a.createElement(tt.a,{open:a,autoHideDuration:6e3,onClose:n},o.a.createElement(at,{onClose:n,severity:"error"},e))}var rt=a(141),it=(a(132),a(41)),ot=(a(133),a(188)),ct=a(183),lt=o.a.memo((function(t){var e=o.a.useState(""),a=Object(it.a)(e,2),n=a[0],r=a[1],i=o.a.useState(""),c=Object(it.a)(i,2),l=c[0],u=c[1],s=function(t){return""===t.trim()},d=function(){u(""),r(t.errorText)},m=function(){s(l)?d():(t.addItem(l.trim()),u(""))};return o.a.createElement("div",{className:"ItemForm"},o.a.createElement("div",{className:"itemFormWrap"},o.a.createElement("div",null,o.a.createElement(ot.a,{label:"Title",variant:"outlined",error:!!n,helperText:n,value:l,onChange:function(t){r(""),u(t.currentTarget.value)},onKeyPress:function(t){13===t.charCode&&(s(l)?d():m())}})),o.a.createElement(z.a,{style:{alignSelf:"flex-start"},color:"primary",onClick:m,"aria-label":"Add"},o.a.createElement(ct.a,null))))}));a(134);function ut(t){return o.a.createElement("div",{className:"Button"},o.a.createElement(Y.a,{variant:t.variant,color:t.color,className:t.className,onClick:t.onClick},t.title))}a(135);function st(t){return o.a.createElement("div",null,o.a.createElement(ot.a,{autoFocus:t.autoFocus,label:t.label,error:t.error,helperText:t.helperText,onKeyPress:t.onKeyPress,onChange:t.onChange,onBlur:t.onBlur,value:t.value,type:t.type}))}var dt=o.a.memo((function(t){var e=Object(i.useState)(""),a=Object(it.a)(e,2),n=a[0],r=a[1],c=Object(i.useState)(!1),l=Object(it.a)(c,2),u=l[0],s=l[1],d=Object(i.useState)(""),m=Object(it.a)(d,2),f=m[0],E=m[1],b=function(t){return""===t.trim()},O=function(){r(""),E(t.error)};return o.a.createElement("div",{className:"EditableTitle"},u?o.a.createElement(st,{label:"Change title",error:!!f,helperText:f,onKeyPress:function(e){13===e.charCode&&(b(n)?O():(t.onKeyPress(n),s(!1)))},onChange:function(t){r(t.currentTarget.value),E("")},onBlur:function(e){b(e.currentTarget.defaultValue)?O():(s(!1),E(""),t.onChange(n))},value:n,autoFocus:!0,type:"text"}):o.a.createElement("span",{onDoubleClick:function(){s(!0),r(t.title)}},t.title))})),mt=a(61),ft=a.n(mt),Et=a(190),bt=o.a.memo((function(t){var e=Object(u.b)(),a=o.a.useCallback((function(a){e(F(t.todoListId,t.task.id,{status:a.currentTarget.checked?n.Completed:n.New}))}),[e]),r=o.a.useCallback((function(a){e(F(t.todoListId,t.task.id,{title:a}))}),[e]),i=o.a.useCallback((function(a){e(F(t.todoListId,t.task.id,{title:a}))}),[e]);return o.a.createElement("li",{className:t.task.status===n.Completed?"done":""},o.a.createElement(Et.a,{color:"primary",id:t.task.id,checked:t.task.status===n.Completed,onChange:a}),o.a.createElement(dt,{error:t.taskTitleError,onKeyPress:i,onChange:r,title:t.task.title}),o.a.createElement(z.a,{onClick:function(){return t.deleteTask(t.task.id,t.todoListId)}},o.a.createElement(ft.a,null)))})),Ot=o.a.memo((function(t){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.tasks[t.todoList.id]}));o.a.useEffect((function(){var a;e((a=t.todoList.id,function(t){t(w("loading")),h(a).then((function(e){t(function(t,e){return{type:"SET-TASKS",todoListId:t,tasks:e}}(a,e.data.items)),t(w("succeeded"))})).catch((function(e){return y(e,t)}))}))}),[]);var r=o.a.useCallback((function(){t.todoFilter("all",t.todoList.id)}),[t.todoFilter,t.todoList.id]),i=o.a.useCallback((function(){t.todoFilter("active",t.todoList.id)}),[t.todoFilter,t.todoList.id]),c=o.a.useCallback((function(){t.todoFilter("completed",t.todoList.id)}),[t.todoFilter,t.todoList.id]),l=o.a.useCallback((function(t,a){var n,r;e((n=a,r=t,function(t){t(w("loading")),j(n,r).then((function(){t(function(t,e){return{type:"DELETE-TASK",todoListId:t,taskId:e}}(n,r)),t(w("succeeded"))})).catch((function(e){return y(e,t)}))}))}),[e]),s=o.a.useCallback((function(a){e(function(t,e){return function(a){a(w("loading")),L(t,e).then((function(t){0===t.data.resultCode?(a({type:"ADD-TASK",task:t.data.data.item}),a(w("succeeded"))):C(t.data,a)})).catch((function(t){return y(t,a)}))}}(t.todoList.id,a))}),[e]),d=o.a.useCallback((function(e){t.changeTodoListTitle(e,t.todoList.id)}),[t.changeTodoListTitle,t.todoList.id]),m=o.a.useCallback((function(e){t.changeTodoListTitle(e,t.todoList.id)}),[t.changeTodoListTitle,t.todoList.id]),f=a,E=f;return"active"===t.todoList.filter&&(E=f.filter((function(t){return t.status===n.New}))),"completed"===t.todoList.filter&&(E=f.filter((function(t){return t.status===n.Completed}))),o.a.createElement("div",{className:"TodoList ".concat("loading"===t.todoList.entityStatus&&"disable")},o.a.createElement("div",{className:"todoListTitle"},o.a.createElement(dt,{error:"Title required",onKeyPress:m,onChange:d,title:t.todoList.title}),o.a.createElement(z.a,{onClick:function(){return t.deleteItem(t.todoList.id)}},o.a.createElement(ft.a,null))),o.a.createElement(lt,{errorText:"Task is required. Enter the task!",addItem:function(t){return s(t)}}),o.a.createElement("ul",{className:"lists"},E.map((function(e){return o.a.createElement(bt,{key:e.id,todoListId:t.todoList.id,deleteTask:l,task:e,taskTitleError:"Task required"})}))),o.a.createElement("div",{className:"buttonBox"},o.a.createElement(ut,{variant:"all"===t.todoList.filter?"contained":"text",color:"default",onClick:r,title:"All"}),o.a.createElement(ut,{variant:"active"===t.todoList.filter?"contained":"text",color:"secondary",onClick:i,title:"Active"}),o.a.createElement(ut,{variant:"completed"===t.todoList.filter?"contained":"text",color:"primary",onClick:c,title:"Completed"})))})),Tt=a(14);function pt(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.todoLists})),a=Object(u.c)((function(t){return t.auth.isSignIn}));o.a.useEffect((function(){a&&t((function(t){t(w("loading")),O().then((function(e){t({type:"SET-TODOLIST",todoLists:e.data}),t(w("succeeded"))})).catch((function(e){return y(e,t)}))}))}),[]);var n=o.a.useCallback((function(e){var a;t((a=e,function(t){t(w("loading")),t(function(t,e){return{type:"CHANGE-TODOS-ENTITY-STATUS",id:t,status:e}}(a,"loading")),p(a).then((function(e){t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(a)),t(w("succeeded"))})).catch((function(e){return y(e,t)}))}))}),[t]),r=o.a.useCallback((function(e,a){t(function(t,e){return function(a){a(w("loading")),g(t,e).then((function(n){a(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",title:t,id:e}}(e,t)),a(w("succeeded"))})).catch((function(t){return y(t,a)}))}}(a,e))}),[t]),i=o.a.useCallback((function(e,a){t(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,id:e}}(e,a))}),[t]),c=o.a.useCallback((function(e){t(function(t){return function(e){e(w("loading")),T(t).then((function(t){e({type:"ADD-TODOLIST",todoList:t.data.data.item}),e(w("succeeded"))})).catch((function(t){return y(t,e)}))}}(e))}),[t]);return a?o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{container:!0},o.a.createElement(lt,{errorText:"Title is required. Enter the title!",title:"Create List",addItem:c})),e.map((function(t){return o.a.createElement(V.a,{item:!0,key:t.id},o.a.createElement(rt.a,{elevation:3},o.a.createElement(Ot,{todoList:t,todoFilter:i,deleteItem:n,changeTodoListTitle:r})))}))):o.a.createElement(Tt.a,{to:"/login"})}var gt=a(194),ht=a(182),Lt=a(185),jt=a(195),vt=a(91);function St(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.auth.isSignIn})),a=Object(vt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){return t.email?t.password?void 0:{password:"Password is required!"}:{email:"Email is required!"}},onSubmit:function(e){var a;t((a=e,function(t){t(w("loading")),S(a).then((function(e){0===e.data.resultCode?(t(D(!0)),t(w("succeeded"))):C(e.data,t)})).catch((function(e){return y(e,t)}))}))}});return e?o.a.createElement(Tt.a,{to:"/"}):o.a.createElement(V.a,{container:!0,justify:"center"},o.a.createElement(V.a,{item:!0,xs:4},o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(gt.a,null,o.a.createElement(ht.a,null,o.a.createElement("p",null,"To sign in get registered ",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},o.a.createElement("strong",null,"here"))),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: ",o.a.createElement("b",null,"free@samuraijs.com")),o.a.createElement("p",null,"Password: ",o.a.createElement("b",null,"free"))),o.a.createElement(Lt.a,null,o.a.createElement(ot.a,Object.assign({type:"email",label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email&&o.a.createElement("div",null,a.errors.email),o.a.createElement(ot.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password&&o.a.createElement("div",null,a.errors.password),o.a.createElement(jt.a,{label:"Remember me",control:o.a.createElement(Et.a,Object.assign({color:"primary",checked:a.values.rememberMe},a.getFieldProps("rememberMe")))}),o.a.createElement(Y.a,{type:"submit",variant:"contained",color:"primary"},"Sign in"))))))}function It(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.app.status})),a=Object(u.c)((function(t){return t.app.initialized}));return o.a.useEffect((function(){t((function(t){k().then((function(e){0===e.data.resultCode&&t(D(!0)),t({type:"APP/SET-INITIALIZED-VALUE",isInitialized:!0})}))}))}),[]),a?o.a.createElement("div",{className:"App"},o.a.createElement(W,null),"loading"===e&&o.a.createElement($,null),o.a.createElement(nt,null),o.a.createElement(H.a,{maxWidth:"lg"},o.a.createElement(V.a,{container:!0,spacing:2},o.a.createElement(Tt.b,{path:"/login",render:function(){return o.a.createElement(St,null)}}),o.a.createElement(Tt.b,{exact:!0,path:"/",render:function(){return o.a.createElement(pt,null)}})))):o.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement(U.a,null))}var kt=a(49);l.a.render(o.a.createElement(u.a,{store:G},o.a.createElement(kt.a,null,o.a.createElement(It,null))),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.6882c773.chunk.js.map